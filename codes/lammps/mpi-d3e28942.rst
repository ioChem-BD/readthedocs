.. _mpi-d3e28942:

mpi
===

.. table:: Implementation level

   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | Type                                                                                                                       | Status                                                                                                                     |
   +============================================================================================================================+============================================================================================================================+
   | CML extraction template                                                                                                    | |image1|                                                                                                                   |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | HTML5 representation                                                                                                       | |image2|                                                                                                                   |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+

.. table:: Template attributes

   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | Attribute                                                                                                                  | Value                                                                                                                      |
   +============================================================================================================================+============================================================================================================================+
   | *source*                                                                                                                   | LAMMPS log                                                                                                                 |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | id                                                                                                                         | mpi                                                                                                                        |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | pattern                                                                                                                    | &#92;s*MPI&#92;stask&#92;stiming&#92;sbreakdown:.\*                                                                        |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | endPattern                                                                                                                 | &#92;s\*                                                                                                                   |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | endOffset                                                                                                                  | 1                                                                                                                          |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | xml:base                                                                                                                   | job/mpi.xml                                                                                                                |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+

.. container:: formalpara-title

   **Input**

::

   MPI task timing breakdown:
   Section |  min time  |  avg time  |  max time  |%varavg| %total
   ---------------------------------------------------------------
   Pair    | 7788.3     | 8256.6     | 8740.9     | 295.9 | 90.15
   Neigh   | 0          | 0          | 0          |   0.0 |  0.00
   Comm    | 31.058     | 515.6      | 984.98     |1185.4 |  5.63
   Output  | 0.7443     | 0.75185    | 0.98648    |   4.6 |  0.01
   Modify  | 382.03     | 383.51     | 384.29     |   3.6 |  4.19
   Other   |            | 2.165      |            |       |  0.02

       

.. container:: formalpara-title

   **Output text**

.. code:: xml

   <comment class="example.output" id="mpi">
           <module cmlx:templateRef="mpi">
               <list cmlx:templateRef="timing" dictRef="mpi">
                  <array dataType="xsd:string" dictRef="l:section" size="6">Pair Neigh Comm Output Modify Other</array>
                  <array dataType="xsd:double" dictRef="l:mintime" size="5">7788.3 0 31.058 0.7443 382.03</array>
                  <array dataType="xsd:double" dictRef="l:avgtime" size="6">8256.6 0 515.6 0.75185 383.51 2.165</array>
                  <array dataType="xsd:double" dictRef="l:maxtime" size="5">8740.9 0 984.98 0.98648 384.29</array>
                  <array dataType="xsd:double" dictRef="l:varavg" size="5">295.9 0.0 1185.4 4.6 3.6</array>
                  <array dataType="xsd:double" dictRef="l:totalpercent" size="6">90.15 0.00 5.63 0.01 4.19 0.02</array>
               </list>
            </module>
       </comment>

.. container:: formalpara-title

   **Template definition**

.. code:: xml

   <record repeat="3" />
   <record repeat="*" id="timing">{X,l:section}\|{F,l:mintime}\|{F,l:avgtime}\|{F,l:maxtime}\|{F,l:varavg}\|{F,l:totalpercent}</record>
   <record>{X,l:section}\|\s+\|{F,l:avgtime}\|\s+\|\s+\|{F,l:totalpercent}</record>
   <transform process="createArray" xpath="." from=".//cml:scalar[@dictRef='l:section']" />
   <transform process="createArray" xpath="." from=".//cml:scalar[@dictRef='l:mintime']" />
   <transform process="createArray" xpath="." from=".//cml:scalar[@dictRef='l:avgtime']" />
   <transform process="createArray" xpath="." from=".//cml:scalar[@dictRef='l:maxtime']" />
   <transform process="createArray" xpath="." from=".//cml:scalar[@dictRef='l:varavg']" />
   <transform process="createArray" xpath="." from=".//cml:scalar[@dictRef='l:totalpercent']" />
   <transform process="pullup" xpath=".//cml:array" />
   <transform process="delete" xpath=".//cml:list[count(*)=0]" />
   <transform process="delete" xpath=".//cml:list[count(*)=0]" />
   <transform process="addAttribute" xpath=".//cml:list" name="dictRef" value="mpi" />

.. |image1| image:: ../../imgs/Total.png
.. |image2| image:: ../../imgs/Total.png
