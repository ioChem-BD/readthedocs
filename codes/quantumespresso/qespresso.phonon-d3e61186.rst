.. _qespresso.phonon-d3e61186:

qespresso.phonon
================

.. table:: Implementation level

   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | Type                                                                                                                       | Status                                                                                                                     |
   +============================================================================================================================+============================================================================================================================+
   | CML extraction template                                                                                                    | |image1|                                                                                                                   |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | HTML5 representation                                                                                                       | |image2|                                                                                                                   |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+

.. table:: Template attributes

   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | Attribute                                                                                                                  | Value                                                                                                                      |
   +============================================================================================================================+============================================================================================================================+
   | *source*                                                                                                                   | QuantumEspresso phonon output                                                                                              |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | id                                                                                                                         | qespresso.phonon                                                                                                           |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | name                                                                                                                       | QuantumEspresso phonon output                                                                                              |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | xml:base                                                                                                                   | topTemplate.xml                                                                                                            |
   +----------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+

.. container:: formalpara-title

   **Input**

::

    &plot nbnd=   6, nks= 202 /
               0.000000  0.000000  0.000000
      -0.0000   -0.0000    0.0000  511.8725  511.8725  512.1798
               0.025000  0.000000  0.025000
      13.5205   14.7719   26.4495  511.4004  511.5129  511.9193
               0.050000  0.000000  0.050000
      26.9505   29.5968   52.6713  509.9478  510.1782  511.4153
               0.075000  0.000000  0.075000
      40.1998   44.5049   78.4401  507.5302  507.9338  510.5510
               0.100000  0.000000  0.100000
      53.1822   59.4816  103.5372  504.2573  504.7890  509.1783
               0.125000  0.000000  0.125000
      65.8202   74.4529  127.7534  500.2712  500.7361  507.1747
               0.150000  0.000000  0.150000
      78.0464   89.2831  150.8955  495.7387  495.7864  504.4527
               0.175000  0.000000  0.175000
      89.8017  103.7863  172.7921  489.9298  490.8924  500.9843
               0.200000  0.000000  0.200000
     101.0300  117.7494  193.3028  483.2289  485.9275  496.8179
               0.225000  0.000000  0.225000
     111.6745  130.9627  212.3267  475.7292  481.0757  492.0785                
       

.. container:: formalpara-title

   **Input**

::

    # Frequency[cm^-1] DOS PDOS
    -1.2837868828E-05  0.0000000000E+00  0.0000E+00  0.0000E+00
     9.9998716213E-01  1.3049302005E-07  6.5247E-08  6.5247E-08
     1.9999871621E+00  5.2197461596E-07  2.6099E-07  2.6099E-07
     2.9999871621E+00  1.1744447878E-06  5.8722E-07  5.8722E-07
     3.9999871621E+00  2.0879035354E-06  1.0440E-06  1.0440E-06
     4.9999871621E+00  3.2623508590E-06  1.6312E-06  1.6312E-06
     5.9999871621E+00  4.6977867584E-06  2.3489E-06  2.3489E-06
     6.9999871621E+00  6.3942112337E-06  3.1971E-06  3.1971E-06
     7.9999871621E+00  8.3516242848E-06  4.1758E-06  4.1758E-06
     8.9999871621E+00  1.0570025912E-05  5.2850E-06  5.2850E-06
     9.9999871621E+00  1.3049416115E-05  6.5247E-06  6.5247E-06
     1.0999987162E+01  1.5789794894E-05  7.8949E-06  7.8949E-06
     1.1999987162E+01  1.8791162248E-05  9.3956E-06  9.3956E-06
     1.2999987162E+01  2.2053518179E-05  1.1027E-05  1.1027E-05
     1.3999987162E+01  2.5576862685E-05  1.2788E-05  1.2788E-05
     1.4999987162E+01  2.9361195768E-05  1.4681E-05  1.4681E-05
       

.. container:: formalpara-title

   **Output text**

.. code:: xml
   :number-lines:

   <comment class="example.output" id="qespresso.phonon">
           <module id="qespresso.phonon">
              <scalar dataType="xsd:integer" dictRef="qex:nbnd">6</scalar>
              <scalar dataType="xsd:integer" dictRef="qex:nks">202</scalar>
              <matrix cols="3" dataType="xsd:double" dictRef="cc:coord" rows="10">0.000000 0.000000 0.000000 0.025000 0.000000 0.025000 0.050000 0.000000 0.050000 0.075000 0.000000 0.075000 0.100000 0.000000 0.100000 0.125000 0.000000 0.125000 0.150000 0.000000 0.150000 0.175000 0.000000 0.175000 0.200000 0.000000 0.200000 0.225000 0.000000 0.225000</matrix>
              <matrix cols="6" dataType="xsd:double" dictRef="qex:flevel" rows="10">-0.0000 -0.0000 0.0000 511.8725 511.8725 512.1798 13.5205 14.7719 26.4495 511.4004 511.5129 511.9193 26.9505 29.5968 52.6713 509.9478 510.1782 511.4153 40.1998 44.5049 78.4401 507.5302 507.9338 510.5510 53.1822 59.4816 103.5372 504.2573 504.7890 509.1783 65.8202 74.4529 127.7534 500.2712 500.7361 507.1747 78.0464 89.2831 150.8955 495.7387 495.7864 504.4527 89.8017 103.7863 172.7921 489.9298 490.8924 500.9843 101.0300 117.7494 193.3028 483.2289 485.9275 496.8179 111.6745 130.9627 212.3267 475.7292 481.0757 492.0785</matrix>
           </module>
       </comment>

.. container:: formalpara-title

   **Output text**

.. code:: xml
   :number-lines:

   <comment class="example.output" id="qespresso.phonon2">
           <module id="qespresso.phonon">
               <array dataType="xsd:double" dictRef="cc:frequency" size="16">-1.2837868828E-05 9.9998716213E-01 1.9999871621E+00 2.9999871621E+00 3.9999871621E+00 4.9999871621E+00 5.9999871621E+00 6.9999871621E+00 7.9999871621E+00 8.9999871621E+00 9.9999871621E+00 1.0999987162E+01 1.1999987162E+01 1.2999987162E+01 1.3999987162E+01 1.4999987162E+01</array>
               <array dataType="xsd:double" dictRef="qex:dos" size="16">0.0000000000E+00 1.3049302005E-07 5.2197461596E-07 1.1744447878E-06 2.0879035354E-06 3.2623508590E-06 4.6977867584E-06 6.3942112337E-06 8.3516242848E-06 1.0570025912E-05 1.3049416115E-05 1.5789794894E-05 1.8791162248E-05 2.2053518179E-05 2.5576862685E-05 2.9361195768E-05</array>
           </module>
       </comment>

.. container:: formalpara-title

   **Template definition**

.. code:: xml
   :number-lines:

   <templateList>  <template pattern="\s*.plot\snbnd.*" endPattern="~" endOffset="1">    <record>.*nbnd\s*={I, qex:nbnd},\s*nks\s*={I, qex:nks}.*</record>    <templateList>      <template pattern="\s{9,}\S+.*" endPattern="\s{9,}\S+.*" endPattern2="~" repeat="*">        <record id="kpoint">{3F,cc:coord}</record>        <record repeat="*" makeArray="true" id="energy">{1_10F,qex:flevel}</record>        <transform process="move" xpath=".//cml:array[@dictRef='qex:benergy']" to=".//cml:list[@cmlx:templateRef='kpoint']" />
                   </template>           
               </templateList>    <transform process="createMatrix" xpath="." from=".//cml:array[@dictRef='cc:coord']" dictRef="cc:coord" />    <transform process="createMatrix" xpath="." from=".//cml:array[@dictRef='qex:flevel']" dictRef="qex:flevel" />    <transform process="pullup" xpath=".//cml:scalar" repeat="3" />    <transform process="pullup" xpath=".//cml:matrix" repeat="3" />     
           </template>  <template pattern=".*Frequency.*DOS.*PDOS.*" endPattern="~" endOffset="1">    <record />    <record repeat="*" makeArray="true">{E,cc:frequency}{E,qex:dos}.*</record>    <transform process="pullup" xpath=".//cml:array" repeat="2" />
           </template>           
       </templateList>
   <transform process="delete" xpath=".//cml:list[count(*)=0]" />
   <transform process="delete" xpath=".//cml:list[count(*)=0]" />
   <transform process="delete" xpath=".//cml:module[count(*)=0]" />
   <transform process="delete" xpath=".//cml:module[count(*)=0]" />

.. |image1| image:: ../../imgs/Total.png
.. |image2| image:: ../../imgs/Total.png
