.. _calculated.position-d3e36166:

calculated.position
===================

.. table:: Implementation level

   +-----------------------------------+-----------------------------------+
   | Type                              | Status                            |
   +===================================+===================================+
   | CML extraction template           | |image0|                          |
   +-----------------------------------+-----------------------------------+
   | HTML5 representation              | |image1|                          |
   +-----------------------------------+-----------------------------------+

.. table:: Template attributes

   +-----------------------------------+-----------------------------------+
   | Attribute                         | Value                             |
   +===================================+===================================+
   | *source*                          | VASP outcar                       |
   +-----------------------------------+-----------------------------------+
   | id                                | calculated.position               |
   +-----------------------------------+-----------------------------------+
   | name                              | Calculated position section       |
   +-----------------------------------+-----------------------------------+
   | pattern                           | \\s*POSITION\s*TOTAL-FORCE.\*     |
   +-----------------------------------+-----------------------------------+
   | endPattern                        | \\s*total\sdrift.\*               |
   +-----------------------------------+-----------------------------------+
   | endOffset                         | 1                                 |
   +-----------------------------------+-----------------------------------+
   | repeat                            | \*                                |
   +-----------------------------------+-----------------------------------+
   | keep                              | last                              |
   +-----------------------------------+-----------------------------------+
   | xml:base                          | position/calculated.position.xml  |
   +-----------------------------------+-----------------------------------+

**Input.**

::

    POSITION                                       TOTAL-FORCE (eV/Angst)
    -----------------------------------------------------------------------------------
        -0.00002      2.24377      0.79325         0.001871     -0.001863      0.067198
        -1.94317      5.60940      0.79325        -0.003895      0.002409      0.058717
         3.88628      2.24377      0.79325        -0.002072      0.002470      0.068952
         1.94313      5.60940      0.79325         0.003820      0.000508      0.056942
         1.94367      1.12264      3.95457         0.001939      0.001296      0.004689
         0.00093      4.49139      3.95314         0.000629      0.000320      0.006217
         5.82990      1.12411      3.95385        -0.002273     -0.001571      0.005234
         3.88701      4.49100      3.95542        -0.000669     -0.000701      0.001570
        -0.00134      0.01117      7.11615         0.004395      0.001798      0.003599
        -1.93797      3.37410      7.10499        -0.002767     -0.009980      0.011309
         3.89024      0.00821      7.11493        -0.005704     -0.001046      0.024817
         1.94339      3.37205      7.10663         0.003518     -0.002407      0.024542
         0.00000      0.00000      0.00000        -0.000982     -0.000387      0.081386
        -1.94315      3.36563      0.00000         0.000362      0.001311      0.081542
         3.88630      0.00000      0.00000         0.000403     -0.001129      0.081661
         1.94315      3.36563      0.00000        -0.000936      0.001985      0.081366
         1.94317      1.12187      1.58649         0.000051     -0.000530      0.101701
         0.00002      4.48750      1.58649         0.000540      0.006077      0.099017
         5.82947      1.12187      1.58649         0.000119      0.000083      0.098373
         3.88632      4.48750      1.58649         0.000039      0.005886      0.104652
        -0.00002      2.24377      3.17321        -0.002532      0.018835     -0.395864
        -1.94317      5.60940      3.17321        -0.001719      0.011846     -0.396337
         3.88628      2.24377      3.17321         0.013230      0.025142     -0.391128
         1.94313      5.60940      3.17321         0.009335      0.014889     -0.380933
         0.00268      0.00603      4.72251        -0.000746      0.003350      0.009566
        -1.94071      3.37094      4.72109        -0.001106      0.002985      0.011565
         3.88519      0.00540      4.72025         0.005881      0.000535      0.017951
         1.94417      3.36510      4.71961         0.002557      0.003496      0.001813
         1.94495      1.12234      6.39972         0.001450      0.001855      0.006440
         0.00355      4.50104      6.38652        -0.004360     -0.005663      0.006159
         5.82850      1.12740      6.38631        -0.006965      0.000849      0.007079
         3.88697      4.49791      6.38841         0.003561      0.000156     -0.001044
        -0.02328      2.28374      8.38682         0.023866     -0.006264     -0.014484
        -1.94017      5.60681      8.47595        -0.008828     -0.034789     -0.037245
         3.92077      2.26790      8.41698        -0.002490      0.011354      0.000662
         1.94068      5.62178      8.44805         0.018357      0.000276     -0.001412
         1.89781      1.33639     10.90359        -0.068883      0.895930      0.316638
         1.76840      2.59691     11.24911        -0.047293     -1.101721     -0.198545
         1.94276      3.99165     11.50079         0.186231      0.429219      0.112486
         0.92961      0.75412     10.86983         0.287847     -0.225793      0.079885
         0.12362      2.24184      9.35007        -0.088798     -0.031133      0.017355
        -0.30417      1.36335     10.96069        -0.815981     -0.138283      0.004374
         3.81773      2.31072      9.38040         0.023107     -0.013760      0.017723
        -1.95074      5.41409      9.42719         0.000607      0.078185      0.012683
         2.00653      5.78558      9.40229         0.006551     -0.009046      0.001269
         2.79689      0.82700     10.55230         0.264780     -0.152924     -0.006499
         2.92877      4.34449     11.14390         0.100885      0.225532      0.062203
         1.17060      4.59525     10.98776         0.041080     -0.064926      0.028085
         1.86270      4.21015     12.57580         0.061990      0.055336      0.046074
    -----------------------------------------------------------------------------------
       total drift:                                0.016013     -0.020582     -0.149649
       

**Output text.**

.. code:: xml

   <comment class="example.output" id="calculated.position">
           <module cmlx:templateRef="calculated.position">
               <atom x3="-0.00002" y3="2.24377" z3="0.79325" />
               <atom x3="-1.94317" y3="5.60940" z3="0.79325" />
               <atom x3="3.88628" y3="2.24377" z3="0.79325" />
               <atom x3="1.94313" y3="5.60940" z3="0.79325" />
               <atom x3="1.94367" y3="1.12264" z3="3.95457" />
               <atom x3="0.00093" y3="4.49139" z3="3.95314" />
               <atom x3="5.82990" y3="1.12411" z3="3.95385" />
               <atom x3="3.88701" y3="4.49100" z3="3.95542" />
               <atom x3="-0.00134" y3="0.01117" z3="7.11615" />
               <atom x3="-1.93797" y3="3.37410" z3="7.10499" />
               <atom x3="3.89024" y3="0.00821" z3="7.11493" />
               <atom x3="1.94339" y3="3.37205" z3="7.10663" />
               <atom x3="0.00000" y3="0.00000" z3="0.00000" />
               <atom x3="-1.94315" y3="3.36563" z3="0.00000" />
               <atom x3="3.88630" y3="0.00000" z3="0.00000" />
               <atom x3="1.94315" y3="3.36563" z3="0.00000" />
               <atom x3="1.94317" y3="1.12187" z3="1.58649" />
               <atom x3="0.00002" y3="4.48750" z3="1.58649" />
               <atom x3="5.82947" y3="1.12187" z3="1.58649" />
               <atom x3="3.88632" y3="4.48750" z3="1.58649" />
               <atom x3="-0.00002" y3="2.24377" z3="3.17321" />
               <atom x3="-1.94317" y3="5.60940" z3="3.17321" />
               <atom x3="3.88628" y3="2.24377" z3="3.17321" />
               <atom x3="1.94313" y3="5.60940" z3="3.17321" />
               <atom x3="0.00268" y3="0.00603" z3="4.72251" />
               <atom x3="-1.94071" y3="3.37094" z3="4.72109" />
               <atom x3="3.88519" y3="0.00540" z3="4.72025" />
               <atom x3="1.94417" y3="3.36510" z3="4.71961" />
               <atom x3="1.94495" y3="1.12234" z3="6.39972" />
               <atom x3="0.00355" y3="4.50104" z3="6.38652" />
               <atom x3="5.82850" y3="1.12740" z3="6.38631" />
               <atom x3="3.88697" y3="4.49791" z3="6.38841" />
               <atom x3="-0.02328" y3="2.28374" z3="8.38682" />
               <atom x3="-1.94017" y3="5.60681" z3="8.47595" />
               <atom x3="3.92077" y3="2.26790" z3="8.41698" />
               <atom x3="1.94068" y3="5.62178" z3="8.44805" />
               <atom x3="1.89781" y3="1.33639" z3="10.90359" />
               <atom x3="1.76840" y3="2.59691" z3="11.24911" />
               <atom x3="1.94276" y3="3.99165" z3="11.50079" />
               <atom x3="0.92961" y3="0.75412" z3="10.86983" />
               <atom x3="0.12362" y3="2.24184" z3="9.35007" />
               <atom x3="-0.30417" y3="1.36335" z3="10.96069" />
               <atom x3="3.81773" y3="2.31072" z3="9.38040" />
               <atom x3="-1.95074" y3="5.41409" z3="9.42719" />
               <atom x3="2.00653" y3="5.78558" z3="9.40229" />
               <atom x3="2.79689" y3="0.82700" z3="10.55230" />
               <atom x3="2.92877" y3="4.34449" z3="11.14390" />
               <atom x3="1.17060" y3="4.59525" z3="10.98776" />
               <atom x3="1.86270" y3="4.21015" z3="12.57580" />
           </module>
       </comment>

**Template definition.**

.. code:: xml

   <record repeat="2" />
   <record id="atom" repeat="*">{F,cc:x3}{F,cc:y3}{F,cc:z3}.*</record>
   <record repeat="2" />
   <transform process="addChild" elementName="atom" xpath=".//cml:list[@cmlx:templateRef='atom']/cml:list" />
   <transform process="addAttribute" xpath=".//cml:atom" name="x3" value="$string(preceding-sibling::cml:scalar[@dictRef='cc:x3'])" />
   <transform process="addAttribute" xpath=".//cml:atom" name="y3" value="$string(preceding-sibling::cml:scalar[@dictRef='cc:y3'])" />
   <transform process="addAttribute" xpath=".//cml:atom" name="z3" value="$string(preceding-sibling::cml:scalar[@dictRef='cc:z3'])" />
   <transform process="move" xpath=".//cml:atom" to="." />
   <transform process="delete" xpath=".//cml:list" />

.. |image0| image:: ../../imgs/Total.png
.. |image1| image:: ../../imgs/Partial.png
